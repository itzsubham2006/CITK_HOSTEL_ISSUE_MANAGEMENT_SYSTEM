{% extends "base.html" %}
{%block title%}CITK HOSTEL MANAGEMENT SYSTEM | Announcement{%endblock%}
{% block content %}

<div class="announcement-wrapper">

  <!-- ================= Create Announcement ================= -->
  <div class="announce-box">
    <h2>ğŸ“¢ Create Announcement</h2>

    <form method="POST" class="announce-form">

      <input type="text" name="title" placeholder="Announcement Title" required>

      <textarea name="message" placeholder="Write announcement message..." required></textarea>

      <select name="hostel">
        <option value="">ğŸŒ All Hostels</option>
        <option value="SJ">SJ Hostel</option>
        <option value="JD">JD Hostel</option>
        <option value="BJ">BJ Hostel</option>
        <option value="SNM">SNM Hostel</option>
        <option value="GG">Gambari Girls Hostel</option>
        <option value="BG">Bakhoungri Girls Hostel</option>
      </select>

      <label class="pin-box">
        <input type="checkbox" name="pin">
        ğŸ“Œ Pin this announcement
      </label>

      <button type="submit">Publish Announcement</button>

    </form>
  </div>

  <!-- ================= Previous Announcements ================= -->
  <div class="previous-section">
    <h3>ğŸ“œ Previous Announcements</h3>

    {% for a in announcements %}
    <div class="announce-card {% if a.is_pinned %}pinned{% endif %}">

      <div class="card-header">
        <h4>
          {% if a.is_pinned %}ğŸ“Œ{% endif %}
          {{ a.title }}
        </h4>
        <span class="date">
          {{ a.created_at.strftime('%d %b %Y') }}
        </span>
      </div>

      <p>{{ a.message }}</p>

      <div class="card-actions">
        <a href="{{ url_for('admin.edit_announcement', id=a.id) }}"
           class="edit-btn">âœï¸ Edit</a>

        <a href="{{ url_for('admin.delete_announcement', id=a.id) }}"
           class="delete-btn"
           onclick="return confirm('Are you sure you want to delete this announcement?')">
           ğŸ—‘ï¸ Delete
        </a>
      </div>

    </div>
    {% else %}
      <p class="empty-text">No announcements yet.</p>
    {% endfor %}

  </div>

</div>

{% endblock %}
