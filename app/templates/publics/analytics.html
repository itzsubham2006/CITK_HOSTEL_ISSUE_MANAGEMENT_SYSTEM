{% extends "base.html" %}
{%block title%}CITK HOSTEL MANAGEMENT SYSTEM | Analytics{%endblock%}

{% block content %}

<div class="analytics-wrapper" style="margin-bottom: 50px;">

  <h2 class="analytics-title">ðŸ“Š Hostel Issue Analytics</h2>

  <!-- STATS -->
  <div class="analytics-cards">
    <div class="stat-card green">
      <h3>Total Issues</h3>
      <p id="total-issues" data-value="{{ total_issues }}"></p>
    </div>

    <div class="stat-card blue">
      <h3>Total Upvotes</h3>
      <p id="total-upvotes" data-value="{{ total_upvotes }}"></p>
    </div>

    <div class="stat-card orange">
      <h3>Pending</h3>
      <p id="pending-count" data-value="{{ status_counts['Pending'] }}"></p>
    </div>

    <div class="stat-card success">
      <h3>Resolved</h3>
      <p id="resolved-count" data-value="{{ status_counts['Resolved'] }}"></p>
    </div>
  </div>

  <!-- CHARTS -->
  <div class="charts-grid">
    <div class="chart-box">
      <h4>Issue Status</h4>
      <canvas id="statusChart" 
        data-pending="{{ status_counts['Pending'] }}" 
        data-inprogress="{{ status_counts['In Progress'] }}" 
        data-resolved="{{ status_counts['Resolved'] }}"></canvas>
    </div>

    <div class="chart-box">
      <h4>Issues by Category</h4>
      <canvas id="categoryChart" 
        data-categories='{{ categories|tojson }}' 
        data-counts='{{ category_counts|tojson }}'></canvas>
    </div>
  </div>

  <!-- TOP ISSUES -->
  <div class="top-issues" 
       data-topissues='{{ top_issues|tojson }}'>
    <h4>ðŸ”¥ Most Upvoted Issues</h4>
    <ul id="top-issues-list"></ul>
  </div>

</div>

{% endblock %}


